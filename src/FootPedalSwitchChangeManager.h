/*******************************************************************************
  FootPedalSwitchChangeManager.h
  
  MIDI Accompaniment Controller
  https://github.com/BarryKVibes/MidiAccompanimentController
  Copyright 2022, Barry K Vibes
  
 *******************************************************************************
  
  This file is part of MidiAccompanimentController.
  
  MidiAccompanimentController is free software: you can redistribute it and/or 
  modify it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  MidiAccompanimentController is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License along 
  with MidiAccompanimentController. If not, see <https://www.gnu.org/licenses/>.
  
 ******************************************************************************/

#ifndef FootPedalSwitchChangeManager_H
#define FootPedalSwitchChangeManager_H

class FootPedalSwitchChangeManager  {

private:

// The SwitchNum enum contains valid values for the Yamaha SX-700/900  Style button SysEx ss = Switch Number byte.
// F0 43 7E 00 ss dd F7
// 
enum StyleSectionControlSwitchNum
{
  Intro1 = 0x00,
  Intro2 = 0x01,
  Intro3 = 0x02,
  Intro4 = 0x03,
  MainA = 0x08,
  MainB = 0x09,
  MainC = 0x0A,
  MainD = 0x0B,
  FillInAA = 0x10,
  FillInBB = 0x11,
  FillInCC = 0x12,
  FillInDD = 0x13,
  BreakFill = 0x18,
  Ending1 = 0x20,
  Ending2 = 0x21,
  Ending3 = 0x22,
  Ending4 = 0x23
};

enum StyleNum
{
  // The following style numbers aresGenos values from https://www.psrtutorial.com/forum/index.php/topic,48497.msg380267.html#msg380267
  // Not all Genos style numbers are in PSR-SX900 and vice versa, hence the Unknown enum is used values from 
  // https://www.psrtutorial.com/forum/index.php/topic,48497.msg380267.html#msg380267
  // Not all Genos style numbers are in PSR-SX900 and vice versa, hence the Unknown enum is used, 
  // and set to Default, which is set to Swingin Big Band = 3909.
  Default = 3909, // SwinginBigBand
  Unknown = Default,

  _00sBoyBand	=	5726,
  _12_8PopBallad	=	5603,
  _16BeatBallad	=	8225,
  _16BeatRock	=	Unknown,
  _40sSwingBallad	=	1356,
  _50sRockAndRoll	=	3695,
  _6_8BalladRock	=	Unknown,
  _6_8ChartBallad	=	Unknown,
  _6_8ClassicSynth	=	7872,
  _6_8GuitarBallad	=	7726,
  _6_8March	=	1472,
  _6_8Rock	=	7746,
  _6_8SlowRock	=	7715,
  _6_8SoulBallad	=	7808,
  _60s8Beat	=	5638,
  _60sBigHit	=	Unknown,
  _60sBlueEyedSoul	=	5947,
  _60sChartSwing	=	3585,
  _60sOrganBallad	=	5672,
  _60sPianoPop	=	5923,
  _60sPopRock	=	5701,
  _60sRisingPop	=	7720,
  _60sRockAndRoll	=	5730,
  _60sShadowedPop	=	5637,
  _60sSuperGroup	=	Unknown,
  _60sUnderground	=	5722,
  _60sVintagePop	=	6059,
  _60sVintageRock	=	5700,
  _60sVintageRumba	=	6064,
  _70s8BeatBallad	=	5668,
  _70sChartBallad	=	5694,
  _70sChartSoul	=	8327,
  _70sCoolBallad	=	8931,
  _70sDisco1	=	8354,
  _70sDisco2	=	5792,
  _70sDiscoFunk	=	8355,
  _70sEasyPop	=	5903,
  _70sFrenchHit	=	6121,
  _70sGlamPiano	=	5952,
  _70sHardRock	=	5696,
  _70sPopDuo1	=	5667,
  _70sPopDuo2	=	5965,
  _70sScatLegend	=	9227,
  _70sShuffleRock	=	7745,
  _70sSpanishDisco	=	Unknown,
  _70sStraightRock	=	5721,
  _70sTVTheme	=	8197,
  _80s8Beat	=	5926,
  _80sAnalogBallad	=	8247,
  _80sBoyBand	=	8236,
  _80sBrazilianPop	=	Unknown,
  _80sBritishPop	=	8222,
  _80sChristmas	=	5813,
  _80sClassic6_8	=	7748,
  _80sClassicRock	=	6447,
  _80sDiscoBeat	=	8896,
  _80sDivaBallad	=	7712,
  _80sEdgyRock	=	5715,
  _80sEuroPop	=	6446,
  _80sFunkIcon	=	8367,
  _80sGuitarPop	=	5713,
  _80sMonsterHit	=	8901,
  _0sMovieBallad	=	8208,
  _80sPianoBallad	=	5689,
  _80sPopBallad	=	5981,
  _80sPowerRock	=	5695,
  _80sRetroDisco	=	5844,
  _80sRockBeat	=	5716,
  _80sRockDiva	=	6456,
  _80sSmoothBallad	=	8244,
  _80sSynthDuo	=	5814,
  _80sSynthPop	=	8365,
  _80sSynthRock	=	8834,
  _80sTeenDisco	=	5842,
  _8BeatAdria	=	5640,
  _90s8BeatBallad	=	5690,
  _90sAussiePop	=	Unknown,
  _90sDancePop	=	Unknown,
  _90sDisco	=	5796,
  _90sGuitarPop	=	8194,
  _90sPopBallad	=	Unknown,
  _90sPopShuffle	=	9448,
  _90sRockBallad	=	8265,
  _90sSmoothBallad	=	8243,
  _90sUSChartBallad	=	Unknown,
  Acoustic8BtBallad	=	5966,
  AcousticJazz	=	3872,
  AcousticRock	=	8260,
  AfroCuban	=	15745,
  AlpenBallad1	=	15745,
  AlpenBallad2	=	8162,
  AlpenLand	=	8163,
  AlpenSchlager	=	5934,
  AmazingGospel	=	5945,
  AngelSun	=	5602,
  AnimationBallad	=	3123,
  AnimationFantasy	=	3117,
  ApresSkiHit	=	5953,
  ApresSkiParty	=	3521,
  ArabicEuro	=	Unknown,
  Axe	=	Unknown,
  Bachata	=	6056,
  BaroqueAir	=	6120,
  BeachRock	=	5735,
  Beguine	=	6017,
  Bhajan	=	Unknown,
  Bhangra	=	Unknown,
  BigBandBallad	=	1353,
  BigBandFast1	=	3910,
  BigBandFast2	=	1347,
  BigBandJazz	=	3921,
  BigBandMedium	=	3904,
  BigBandShuffle	=	3919,
  BigBandSwing	=	Unknown,
  BigRoom	=	8481,
  BlockbusterBallad	=	Unknown,
  BlueberryBlues	=	7776,
  Bluegrass	=	266,
  BluesRock	=	5760,
  BluesShuffle	=	3685,
  BohemianWaltz	=	5601,
  BoleroLento	=	6018,
  BossaBrazil	=	364,
  BossaNova	=	356,
  BoyBandBallad	=	5933,
  BoyBandPop	=	8223,
  BrassBand	=	3112,
  BrazilianBossa	=	Unknown,
  BritPopSwing	=	6656,
  BritRockPop	=	5714,
  BroadwayBallad	=	5677,
  BubblegumPop	=	5639,
  CalifornianCountry	=	5906,
  CanadianRock	=	5970,
  CanadianTeenPop	=	Unknown,
  CelticDance	=	6123,
  CelticDance3_4	=	2658,
  ChaCha	=	6041,
  Charleston	=	1322,
  ChartEDM	=	5949,
  ChartPianoShuffle	=	9224,
  Chillout1	=	8199,
  Chillout2	=	8200,
  ChilloutCafe	=	8242,
  ChillPerformer	=	3113,
  ChristmasBallad	=	1510,
  ChristmasSwing	=	1504,
  ChristmasWaltz	=	2018,
  Classic8Beat	=	5921,
  ClassicalPop	=	Unknown,
  ClassicBigBand	=	3908,
  CloudyBay	=	3114,
  ClubDance1	=	8406,
  ClubDance2	=	5824,
  ClubHouse1	=	9410,
  ClubHouse2	=	8486,
  ClubMixDJ	=	Unknown,
  ClubReggaeton	=	Unknown,
  ContempGtrPop	=	Unknown,
  Cool8Beat	=	5635,
  CoolBossa	=	366,
  CoolJazzBallad	=	1325,
  CoolJazzWaltz	=	Unknown,
  CoolPianoJazz	=	3892,
  CoolRAndB	=	8214,
  CoolSwing	=	Unknown,
  Country2_4	=	256,
  Country8Beat1	=	5917,
  Country8Beat2	=	5888,
  Country8Beat3	=	5890,
  CountryBallad1	=	5893,
  CountryBallad2	=	5894,
  CountryBallad3	=	8452,
  CountryBeat	=	Unknown,
  CountryBlues	=	5905,
  CountryFolk8Beat	=	5912,
  CountryFolkBallad	=	10080,
  CountryFolkUpbeat	=	1286,
  CountryHits	=	5892,
  CountryPop	=	5891,
  CountryPopDuo	=	Unknown,
  CountryRock	=	5889,
  CountryShuffle	=	1287,
  CountrySingalong	=	1283,
  CountrySongwriter	=	5913,
  CountryStraits	=	5907,
  CountryStrummin	=	5902,
  CountrySwing	=	1280,
  CountryWaltz	=	2817,
  CrazyPop	=	8210,
  CubanChaCha	=	Unknown,
  CubanSon	=	8592,
  DanceFloor	=	5948,
  DancehallPop	=	3686,
  DangerDance	=	Unknown,
  DetroitBeat	=	Unknown,
  DetroitPop	=	Unknown,
  DirtyPop	=	8410,
  DiscoChocolate	=	8864,
  DiscoFox	=	5803,
  DiscoFoxRock	=	5723,
  DiscoSurvival	=	Unknown,
  Dixieland	=	1323,
  DreamDance	=	8388,
  DreamSchlager	=	8499,
  DreamyBallad	=	1354,
  Dubstep	=	8502,
  Duranguense	=	Unknown,
  Easy8Beat	=	Unknown,
  EasyBallad	=	5670,
  EasyListening	=	1344,
  EasyPop	=	5922,
  EasySwing	=	1320,
  EDMAnthem	=	8508,
  ElectroHouse1	=	8505,
  ElectroHouse2	=	8488,
  Electronica	=	8405,
  ElectroPop	=	5845,
  ElectroRock	=	Unknown,
  ElectroStep	=	8492,
  EnglishWaltz	=	1536,
  EpicBallad	=	5674,
  EtherealMovie	=	3106,
  EtherealVoices	=	3110,
  Eurodance1	=	8493,
  Eurodance2	=	8494,
  EuroPopMambo	=	5659,
  EuroPopOrgan	=	5827,
  EuroTrance	=	8503,
  FantasyFox	=	3106,
  FastChaCha	=	Unknown,
  FastJazz	=	Unknown,
  FinalWaltz	=	2851,
  FiveFour	=	4608,
  Flamenco	=	2029,
  FolkPop	=	5901,
  FolkSongDuo	=	5641,
  Forro	=	Unknown,
  Foxtrot	=	1312,
  FranklySoul	=	8325,
  FrenchClub	=	8411,
  FrenchDJ	=	Unknown,
  FrenchJazz	=	1321,
  FrenchMusette	=	2023,
  FrenchWaltz	=	2024,
  FunkDisco	=	8330,
  FunkPop	=	8259,
  FunkPopRock	=	5802,
  FunkyHouse	=	Unknown,
  FunkyShuffle	=	Unknown,
  FusionShuffle	=	9218,
  GangstaHouse	=	8489,
  GermanMarch1	=	451,
  GermanMarch2	=	452,
  GermanRock	=	5717,
  GermanWaltz	=	2038,
  GlobalDJs	=	8391,
  GospelBallad	=	5963,
  GospelBrothers	=	8321,
  GospelSisters	=	2656,
  GospelSwing	=	1024,
  GreenFantasia	=	8169,
  GrindHouse	=	8490,
  GrungeRock	=	Unknown,
  Grupera	=	Unknown,
  Guaguanco	=	Unknown,
  Guajira	=	8591,
  GuitarRumba	=	6048,
  GuitarSerenade	=	2019,
  Gunslinger	=	Unknown,
  HappyBeat	=	5918,
  HappyReggae	=	1440,
  Hawaiian	=	1506,
  HelloShuffle	=	8170,
  HipHop	=	8416,
  Hoedown	=	257,
  HollywoodGospel	=	9226,
  Ibiza2010	=	5826,
  IcyBallad	=	Unknown,
  InstrumentalJazz	=	3887,
  IrishDance	=	8674,
  IrishHymn	=	8165,
  IrishPopBallad	=	5686,
  IrishPopRock	=	Unknown,
  ItsShowtime	=	3520,
  ItalianMazurka	=	2025,
  ItalianWaltz	=	2026,
  JazzFunk	=	8324,
  JazzFusion	=	9219,
  JazzGuitarClub	=	3878,
  JazzOrganCombo	=	3888,
  JazzOrganGroove	=	5644,
  JazzSamba	=	8552,
  JingJuJieZou	=	Unknown,
  Jive	=	3588,
  Joropo	=	Unknown,
  JumpJive	=	3680,
  JustRnB	=	Unknown,
  Keroncong	=	Unknown,
  KissDancePop	=	10497,
  KoolShuffle	=	9221,
  Laff	=	Unknown,
  LatinPartyPop	=	8245,
  Live8Beat	=	5702,
  LiveMerengue	=	8605,
  LiveSoulBand	=	8258,
  LoungeBossa	=	363,
  LovelyShuffle	=	7682,
  LoveSong	=	5665,
  MalfufFunk	=	Unknown,
  MallorcaDisco	=	8409,
  MallorcaParty	=	5804,
  ManhattanSwing	=	3893,
  MariachiWaltz	=	2030,
  MediumJazzWaltz	=	2849,
  MexicanDance	=	490,
  MiamiHouse	=	8487,
  MidnightSwing	=	1345,
  MinimalElectro	=	Unknown,
  ModCeltic4_4	=	Unknown,
  ModCeltic6_8	=	Unknown,
  ModernBigBand	=	3886,
  ModernDangdut1	=	Unknown,
  ModernDangdut2	=	Unknown,
  ModernHipHop	=	5924,
  ModernPickin	=	5904,
  ModernPopBallad	=	8239,
  ModernSchlager	=	6436,
  Moonlight6_8	=	7714,
  MotorCity	=	5761,
  MovieBallad	=	3104,
  MovieClassic	=	5961,
  MovieDisco	=	5797,
  MovieHorns	=	3120,
  MoviePanther	=	3913,
  MovieSoundtrack	=	2049,
  MovieSwing1	=	1352,
  MovieSwing2	=	1348,
  MrSoul	=	8320,
  NashvillePop	=	5914,
  NashvilleRock	=	8267,
  NatureHipHop	=	Unknown,
  NightWalk	=	3115,
  OberkrainerPolka1	=	1,
  OberkrainerPolka2	=	505,
  OberkrainerWaltz1	=	483,
  OberkrainerWaltz2	=	2044,
  OktoberRockHit	=	270,
  OldiesRockAndRoll	=	6755,
  OnBroadway	=	3111,
  OrchBigBand1	=	3906,
  OrchBigBand2	=	3907,
  Orchestral12_8	=	7716,
  Orchestral6_8	=	7713,
  OrchestralMarch	=	449,
  OrchestralPolka	=	482,
  OrchestralSwing1	=	1350,
  OrchestralSwing2	=	3914,
  OrchMovieBallad	=	Unknown,
  OrchPopClassics	=	Unknown,
  OrchRockBallad1	=	5960,
  OrchRockBallad2	=	8261,
  OrganBossa	=	6030,
  OrganChaCha	=	6020,
  OrganHymn	=	3119,
  OrganQuickstep	=	1316,
  OrganRumba	=	6057,
  OrganSamba	=	8545,
  OrganSwing	=	1318,
  Parranda	=	Unknown,
  PartyAGogo	=	1339,
  PartyAnthem	=	8504,
  PartyArena	=	5805,
  PartyPolka	=	0,
  Pasodoble	=	3556,
  PhillyDisco	=	8352,
  PianoBallad	=	5664,
  PianoBoogie	=	3681,
  PianoHouse	=	8491,
  Play4Sofa	=	3116,
  PolkaPop	=	481,
  PopBachata	=	Unknown,
  PopBossa	=	353,
  PopCha_Cha	=	6034,
  PopCumbia	=	10436,
  PopEvergreen	=	5962,
  PopLatin	=	6053,
  PopLatinBallad	=	6058,
  PopMusical	=	Unknown,
  PopRockShuffle	=	9225,
  PopRumba	=	6039,
  PopWaltz	=	7200,
  PowerBallad	=	5669,
  PowerRock	=	5699,
  PubPiano	=	480,
  Quickstep1	=	1340,
  Quickstep2	=	1315,
  RAndBShuffle	=	3694,
  RAndBSlowBallad	=	8329,
  RAndBSoulBallad	=	289,
  Ragtime	=	10434,
  Reggaeton1	=	Unknown,
  Reggaeton2	=	Unknown,
  ReggaetonDJ	=	Unknown,
  ReggaetonPop	=	Unknown,
  ReggaetonSlowJam	=	Unknown,
  RetroDance	=	5829,
  RetroSoul	=	Unknown,
  RockAndRoll	=	5732,
  RockAndRollJive	=	3687,
  RockAndRollShuffle	=	6753,
  RockChaCha	=	4271,
  RockShuffleFast	=	Unknown,
  RomanticWaltz	=	2041,
  Rumba	=	6040,
  RumbaFlamenco	=	Unknown,
  RumbaIsland	=	384,
  Saeidy	=	Unknown,
  SaeidyPop	=	Unknown,
  Salsa	=	8590,
  SalsaGranCiclon	=	Unknown,
  Samba	=	8559,
  SambaReggae	=	Unknown,
  SambaRio	=	373,
  SaturdayNight	=	8356,
  ScandBugg	=	3684,
  ScandCountry	=	5895,
  ScandShuffle	=	7137,
  ScandSlowRock	=	7683,
  ScandWaltz	=	2027,
  Schlager6_8	=	7717,
  SchlagerAlp	=	5647,
  SchlagerBeat	=	5646,
  SchlagerFever	=	5724,
  SchlagerFox	=	5925,
  SchlagerPalace	=	5931,
  SchlagerPolka	=	485,
  SchlagerPop	=	3072,
  SchlagerRock	=	5971,
  SchlagerRumba	=	6052,
  SchlagerSamba	=	8672,
  SchlagerShuffle	=	7680,
  SchlagerWaltz	=	5600,
  SciFiMarch	=	492,
  ScottishJig	=	4065,
  ScottishPolka	=	1509,
  ScottishReel	=	487,
  ScottishStrathspey	=	496,
  ScottishWaltz	=	2036,
  SecretService	=	5676,
  SheriffReggae	=	9120,
  SingalongDanceBand	=	1341,
  SingalongPiano	=	499,
  Sirtaki	=	488,
  Skiffle	=	5733,
  SkyPop	=	8498,
  SlowNSwingin	=	Unknown,
  SlowBlues	=	7810,
  SlowBossa	=	354,
  SlowFoxtrot1	=	1362,
  SlowFoxtrot2	=	1314,
  SlowJazzWaltz	=	2850,
  SlowWaltz	=	1539,
  SmoothPopBallad	=	8227,
  SoftSchlager	=	5930,
  SongwriterBallad	=	5980,
  SoulBallad	=	8240,
  SoulfulBallad	=	5979,
  SoulShuffle	=	3700,
  SoulSupreme	=	5762,
  SouthernGospel	=	7812,
  SpanishPaso	=	3553,
  StadiumRock	=	5720,
  StandardRock	=	5703,
  StreetBeatbox	=	9452,
  StringAdagio	=	6128,
  SurfRock	=	5932,
  Swedish8BeatPop	=	5661,
  SwedishPopShuffle	=	6754,
  SwingFox	=	1313,
  SwinginBigBand	=	3909,
  SynthPop	=	8241,
  SynthPopDuo	=	5807,
  Tango	=	3459,
  TangoFlamencos	=	8616,
  TapDanceSwing	=	1319,
  Tarantella	=	1507,
  Tijuana	=	1408,
  TopChartCountry	=	263,
  TradPianoBallad	=	3890,
  TradPianoJazz	=	3889,
  TrancePop	=	8401,
  TropicalHouse	=	8495,
  TurkishEuro	=	8212,
  Twist	=	5728,
  UKFolkPop	=	Unknown,
  UKSoftRock	=	Unknown,
  UKSoul	=	Unknown,
  UnpluggedBallad	=	5983,
  UnpluggedPop	=	5642,
  UpTempo8Beat	=	5920,
  USClubDance	=	8482,
  USCountryPop	=	Unknown,
  USElectroPop	=	Unknown,
  USFolkPop	=	Unknown,
  USMarch	=	448,
  USMarchingBand	=	Unknown,
  USSingerPop	=	Unknown,
  VienneseWaltz	=	2048,
  VintageGuitarPop	=	5633,
  VocalFoxtrot	=	1357,
  VocalPopBallad	=	5964,
  VocalWaltz	=	2856,
  VolksDance	=	503,
  VolksSchlager	=	6450,
  WehdaSaghira	=	Unknown,
  WestCoastPop	=	8196,
  WildWest	=	6118,
  Wonder8Beat	=	5634,
  Worship6_8	=	8164,
  WorshipSlow	=	5678,
  XiQingLuoGu	=	Unknown,
  YoungBallad	=	5936,
  YoungFox	=	5809,
  ZitherPolka	=	497
};

public:

  // This method is the default constructor.
  FootPedalSwitchChangeManager();
  void HandleButtonChange(int buttonIndex, bool isActive);

private:
  void HandleFivePedalBoardSwitchChange(int buttonIndex, bool isActive);
  void HandleEightPedalBoardSwitchChange(int buttonIndex, bool isActive);

  void SendStyleSectionControlSysEx(StyleSectionControlSwitchNum switchNum, bool isSwitchOn);
  void SendStyleNumSysEx(uint16_t styleNum);
  void SendTempoSysEx(uint16_t tempo);

  String PrependZeros(String plaintext, uint8_t numCharsWide);

private:
  const uint16_t DefaultTempo = 120;
  const uint16_t MaxTempo = 220;
  const uint16_t MinTempo = 30;
  
  uint16_t mCurTempo;
};

#endif
